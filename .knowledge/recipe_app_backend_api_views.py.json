{"is_source_file": true, "format": "Python", "description": "This file defines API views and permissions for a Django REST Framework-based application related to recipes. It includes viewsets for recipe CRUD operations, authentication endpoints, health check, and API root. It also contains permission classes and pagination setup.", "external_files": ["django.contrib.auth", "django.db.models", "rest_framework", ".models", ".serializers"], "external_methods": ["get_user_model", "Token.objects.get_or_create", "Token.objects.filter", "permissions.SAFE_METHODS"], "published": ["health", "api_root", "RegisterView", "LoginView", "LogoutView", "RecipeViewSet", "IsAuthorOrReadOnly", "DefaultPagination"], "classes": [{"name": "IsAuthorOrReadOnly", "description": "Custom permission that allows unsafe methods only for the author of a recipe, read-only for others."}, {"name": "DefaultPagination", "description": "Defines default page size and maximum page size for paginated responses."}, {"name": "RegisterView", "description": "API view for user registration which creates a user and issues an auth token."}, {"name": "LoginView", "description": "API view for user login, returning an auth token."}, {"name": "LogoutView", "description": "API view for logging out the user by deleting their auth token."}, {"name": "RecipeViewSet", "description": "Viewset providing CRUD operations for recipes with filtering, ordering, and permissions."}], "methods": [{"name": "has_object_permission(self, request, view, obj)", "description": "Checks if the request user is the author of the object for unsafe methods.", "scope": "IsAuthorOrReadOnly", "scopeKind": "class"}, {"name": "create(self, request, *args, **kwargs)", "description": "Creates a new user and generates an auth token upon registration.", "scope": "RegisterView", "scopeKind": "class"}, {"name": "post(self, request, *args, **kwargs)", "description": "Handles user login, validates credentials, and returns a token.", "scope": "LogoutView", "scopeKind": "class"}, {"name": "post", "description": "Logs out the user by deleting their token."}, {"name": "get_permissions(self)", "description": "Dynamically sets permissions based on action for the RecipeViewSet.", "scope": "RecipeViewSet", "scopeKind": "class"}, {"name": "perform_create(self, serializer)", "description": "Associates the current user as author when creating a recipe.", "scope": "RecipeViewSet", "scopeKind": "class"}, {"name": "get_queryset(self)", "description": "Filters recipes based on title or author query parameters.", "scope": "RecipeViewSet", "scopeKind": "class"}, {"name": "api_root(request)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "health(request)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["get_user_model()", "Token.objects.get_or_create()", "Token.objects.filter()"], "search-terms": ["Recipe CRUD API", "DRF permissions", "Token authentication", "Recipe filtering", "Pagination setup", "User registration and login", "Author-specific recipe modification"], "state": 2, "file_id": 16, "knowledge_revision": 50, "git_revision": "f168160bc55210255f24ae7277fb3b3487fff279", "revision_history": [{"37": "53a253e72413e2023810330afa367abc6c214315"}, {"41": "53a253e72413e2023810330afa367abc6c214315"}, {"50": "f168160bc55210255f24ae7277fb3b3487fff279"}], "ctags": [{"_type": "tag", "name": "DefaultPagination", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^class DefaultPagination(PageNumberPagination):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "IsAuthorOrReadOnly", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^class IsAuthorOrReadOnly(permissions.BasePermission):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "LoginView", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^class LoginView(generics.GenericAPIView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "LogoutView", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^class LogoutView(generics.GenericAPIView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RecipeViewSet", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^class RecipeViewSet(viewsets.ModelViewSet):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RegisterView", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^class RegisterView(generics.CreateAPIView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "api_root", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^def api_root(request):$/", "language": "Python", "kind": "function", "signature": "(request)"}, {"_type": "tag", "name": "authentication_classes", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^    authentication_classes = [TokenAuthentication]$/", "language": "Python", "kind": "variable", "scope": "LogoutView", "scopeKind": "class"}, {"_type": "tag", "name": "authentication_classes", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^    authentication_classes = [TokenAuthentication]$/", "language": "Python", "kind": "variable", "scope": "RecipeViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^    def create(self, request, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, request, *args, **kwargs)", "scope": "RegisterView", "scopeKind": "class"}, {"_type": "tag", "name": "filter_backends", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^    filter_backends = [filters.SearchFilter, filters.OrderingFilter]$/", "language": "Python", "kind": "variable", "scope": "RecipeViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "get_permissions", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^    def get_permissions(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "RecipeViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "get_queryset", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^    def get_queryset(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "RecipeViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "has_object_permission", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^    def has_object_permission(self, request, view, obj):$/", "language": "Python", "kind": "member", "signature": "(self, request, view, obj)", "scope": "IsAuthorOrReadOnly", "scopeKind": "class"}, {"_type": "tag", "name": "health", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^def health(request):$/", "language": "Python", "kind": "function", "signature": "(request)"}, {"_type": "tag", "name": "max_page_size", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^    max_page_size = 100$/", "language": "Python", "kind": "variable", "scope": "DefaultPagination", "scopeKind": "class"}, {"_type": "tag", "name": "ordering_fields", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^    ordering_fields = [\"created_at\", \"title\"]$/", "language": "Python", "kind": "variable", "scope": "RecipeViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "page_size", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^    page_size = 10$/", "language": "Python", "kind": "variable", "scope": "DefaultPagination", "scopeKind": "class"}, {"_type": "tag", "name": "page_size_query_param", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^    page_size_query_param = \"page_size\"$/", "language": "Python", "kind": "variable", "scope": "DefaultPagination", "scopeKind": "class"}, {"_type": "tag", "name": "pagination_class", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^    pagination_class = DefaultPagination$/", "language": "Python", "kind": "variable", "scope": "RecipeViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "perform_create", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^    def perform_create(self, serializer):$/", "language": "Python", "kind": "member", "signature": "(self, serializer)", "scope": "RecipeViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "permission_classes", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^    permission_classes = [IsAuthorOrReadOnly]$/", "language": "Python", "kind": "variable", "scope": "RecipeViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "permission_classes", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^    permission_classes = [permissions.AllowAny]$/", "language": "Python", "kind": "variable", "scope": "LoginView", "scopeKind": "class"}, {"_type": "tag", "name": "permission_classes", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^    permission_classes = [permissions.AllowAny]$/", "language": "Python", "kind": "variable", "scope": "RegisterView", "scopeKind": "class"}, {"_type": "tag", "name": "permission_classes", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^    permission_classes = [permissions.IsAuthenticated]$/", "language": "Python", "kind": "variable", "scope": "LogoutView", "scopeKind": "class"}, {"_type": "tag", "name": "post", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^    def post(self, request, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, request, *args, **kwargs)", "scope": "LoginView", "scopeKind": "class"}, {"_type": "tag", "name": "post", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^    def post(self, request, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, request, *args, **kwargs)", "scope": "LogoutView", "scopeKind": "class"}, {"_type": "tag", "name": "queryset", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^    queryset = Recipe.objects.select_related(\"author\").all()$/", "language": "Python", "kind": "variable", "scope": "RecipeViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "search_fields", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^    search_fields = [\"title\", \"author__username\"]$/", "language": "Python", "kind": "variable", "scope": "RecipeViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "serializer_class", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^    serializer_class = LoginSerializer$/", "language": "Python", "kind": "variable", "scope": "LoginView", "scopeKind": "class"}, {"_type": "tag", "name": "serializer_class", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^    serializer_class = RecipeSerializer$/", "language": "Python", "kind": "variable", "scope": "RecipeViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "serializer_class", "path": "/home/kavia/workspace/code-generation/recipe-hub-184549-184588/recipe_app_backend/api/views.py", "pattern": "/^    serializer_class = UserRegisterSerializer$/", "language": "Python", "kind": "variable", "scope": "RegisterView", "scopeKind": "class"}], "hash": "d538cfebb2b9fe83c897ec8365b998bd", "format-version": 4, "code-base-name": "recipe_app_backend", "filename": "recipe_app_backend/api/views.py", "fields": [{"name": "authentication_classes = [TokenAuthentication]", "scope": "LogoutView", "scopeKind": "class", "description": "unavailable"}, {"name": "filter_backends = [filters.SearchFilter, filters.OrderingFilter]", "scope": "RecipeViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "max_page_size = 100", "scope": "DefaultPagination", "scopeKind": "class", "description": "unavailable"}, {"name": "ordering_fields = [\"created_at\", \"title\"]", "scope": "RecipeViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "page_size = 10", "scope": "DefaultPagination", "scopeKind": "class", "description": "unavailable"}, {"name": "page_size_query_param = \"page_size\"", "scope": "DefaultPagination", "scopeKind": "class", "description": "unavailable"}, {"name": "pagination_class = DefaultPagination", "scope": "RecipeViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "permission_classes = [IsAuthorOrReadOnly]", "scope": "RecipeViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "permission_classes = [permissions.AllowAny]", "scope": "LoginView", "scopeKind": "class", "description": "unavailable"}, {"name": "permission_classes = [permissions.IsAuthenticated]", "scope": "LogoutView", "scopeKind": "class", "description": "unavailable"}, {"name": "queryset = Recipe.objects.select_related(\"author\").all()", "scope": "RecipeViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "search_fields = [\"title\", \"author__username\"]", "scope": "RecipeViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "serializer_class = LoginSerializer", "scope": "LoginView", "scopeKind": "class", "description": "unavailable"}, {"name": "serializer_class = RecipeSerializer", "scope": "RecipeViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "serializer_class = UserRegisterSerializer", "scope": "RegisterView", "scopeKind": "class", "description": "unavailable"}]}